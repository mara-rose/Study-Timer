<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study Timer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech&display=swap" rel="stylesheet">
  <style>
    body{
      background-image: url('téléchargement (1).jpg');
      background-size: cover;
      display: flex;
      flex-direction: column;
      justify-content: start;
      row-gap: 50px;
      align-items: center;
      height: 600px;
      font-family: 'Share Tech';
      color: rgb(164, 37, 238);
    }
    .contain{
      display: flex;
      flex-direction: column;
      align-items: center;
      row-gap: 15px;
    }
    .time-real{
      font-size: 40px;   
    }
    .note{
      font-size: 25px;
    }
    .timer{
      font-size: 180px;
      margin: 0;
    }
    .start-button{
      background-color:rgb(164, 37, 238) ;
      color: white;
      border: none;
      padding: 10px 30px;
      border-radius: 20px;
      font-size: 18px;
      cursor: pointer;
    }

    .reset-button,
    .setting-button{
      background-color:rgb(164, 37, 238) ;
      padding: 5px 10px;
      border-radius: 20px;
      border: none;
    }
    .row-button{
      display: flex;
      column-gap: 15px;
    }
  </style>
</head>
<body>
  <h1 class="js-time-real time-real"></h1>
  <div class="contain">
  <p class="js-note note">you're building momentum, don't stop now !</p>
  <h1 class="js-timer timer"></h1>
  <div class="row-button">
    <button class="js-pause-button start-button" onclick="toggleTime();">Start</button>
    <button class="js-reset-button reset-button " onclick="resetTimer();"><img src="autorenew_24dp_FFFFFF_FILL0_wght400_GRAD0_opsz24 (1).svg"></button>
    <button class="setting-button"><img src="settings_heart_24dp_FFFFFF_FILL0_wght400_GRAD0_opsz24.svg"></button>
  </div>
  </div>

  <script>
    let intervalId ;
    let TimerData = JSON.parse(localStorage.getItem('data')) || { leftTime : 1800, isPaused : false, note : 'you\'re building momentum, don\'t stop now !'}//30minute *60
    const timeDisplay = document.querySelector('.js-timer');
    const noteElement = document.querySelector('.js-note');
    const pauseElement = document.querySelector('.js-pause-button');
    const timeRealElement = document.querySelector('.js-time-real');

    function realTime(){
      const timeNow = new Date();
      let hour = timeNow.getHours();
      let minute = timeNow.getMinutes();
      let second = timeNow.getSeconds();
      let PmAm = (hour>=12) ? 'PM' : 'AM' 
      hour = hour %12 || 12;
      timeRealElement.innerHTML = `${('0'+ hour).slice(-2)}:${('0'+minute).slice(-2)}:${('0'+second).slice(-2)} ${PmAm}`;
    }
    realTime();
    setInterval(realTime,1000);

    function updateDisplay(){
      let minutes = Math.floor(TimerData.leftTime/60);
      let seconds = TimerData.leftTime % 60 ;
      timeDisplay.innerHTML = `${('0'+ minutes).slice(-2)}:${('0'+seconds).slice(-2)}`;
      localStorage.setItem('data', JSON.stringify(TimerData));
    }

    function toggleTime(){
      if(!TimerData.isPaused){
        intervalId = setInterval(function(){
          if(TimerData.leftTime>0){
            TimerData.leftTime--;
            updateDisplay();
          }else{
            clearInterval(intervalId);
            TimerData.note ='Time to take a Break !!'
            noteElement.innerHTML = TimerData.note;
            TimerData.isPaused = true;
            pauseElement.innerHTML='Resume';
            localStorage.setItem('data', JSON.stringify(TimerData));
          }
        },1000);
        pauseElement.innerText = 'Pause'
        TimerData.isPaused = true;
      }
      else{
        clearInterval(intervalId);
        pauseElement.innerText = 'Resume'
        TimerData.isPaused = false ;

      }
      localStorage.setItem('data',JSON.stringify(TimerData));
    }

    function resetTimer(){
     TimerData.leftTime = 1800;
     clearInterval(intervalId);
     TimerData.isPaused = false ;
     pauseElement.innerText = 'Start'
     TimerData.note = 'you\'re building momentum, don\'t stop now !'
     noteElement.innerHTML = TimerData.note;
     updateDisplay();
     localStorage.setItem('data',JSON.stringify(TimerData));
    }
  
    pauseElement.innerText = TimerData.isPaused ? 'Resume' : 'Start';
    noteElement.innerHTML = TimerData.note;
    updateDisplay();


   if (!TimerData.isPaused && TimerData.leftTime > 0) {
   toggleTime();
   }
  </script>
</body>
</html>